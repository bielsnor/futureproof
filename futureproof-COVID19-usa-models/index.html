<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Various Covid Models by State</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Various Covid Models by State" />
<meta name="author" content="Ryan Gomez" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://bielsnor.github.io/futureproof/futureproof-COVID19-usa-models/" />
<meta property="og:url" content="https://bielsnor.github.io/futureproof/futureproof-COVID19-usa-models/" />
<meta property="og:image" content="https://bielsnor.github.io/futureproof/images/covid-compare-country-death-hos.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-27T00:00:00-05:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Ryan Gomez"},"headline":"Various Covid Models by State","dateModified":"2020-06-27T00:00:00-05:00","datePublished":"2020-06-27T00:00:00-05:00","@type":"BlogPosting","image":"https://bielsnor.github.io/futureproof/images/covid-compare-country-death-hos.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://bielsnor.github.io/futureproof/futureproof-COVID19-usa-models/"},"url":"https://bielsnor.github.io/futureproof/futureproof-COVID19-usa-models/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/futureproof/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://bielsnor.github.io/futureproof/feed.xml" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-57179511-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>

<link rel="shortcut icon" type="image/x-icon" href="/futureproof/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Various Covid Models by State</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Various Covid Models by State" />
<meta name="author" content="Ryan Gomez" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://bielsnor.github.io/futureproof/futureproof-COVID19-usa-models/" />
<meta property="og:url" content="https://bielsnor.github.io/futureproof/futureproof-COVID19-usa-models/" />
<meta property="og:image" content="https://bielsnor.github.io/futureproof/images/covid-compare-country-death-hos.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-27T00:00:00-05:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Ryan Gomez"},"headline":"Various Covid Models by State","dateModified":"2020-06-27T00:00:00-05:00","datePublished":"2020-06-27T00:00:00-05:00","@type":"BlogPosting","image":"https://bielsnor.github.io/futureproof/images/covid-compare-country-death-hos.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://bielsnor.github.io/futureproof/futureproof-COVID19-usa-models/"},"url":"https://bielsnor.github.io/futureproof/futureproof-COVID19-usa-models/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://bielsnor.github.io/futureproof/feed.xml" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-57179511-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/futureproof/"></a></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">


  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#Covid-Tracking-Dataset-(w/-hospitalised-data)">Covid Tracking Dataset (w/ hospitalised data) </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Load-and-Clean-the-Data">Load and Clean the Data </a></li>
<li class="toc-entry toc-h2"><a href="#Missing-values:-Retrieving-from-other-datasets-or-through-merging-columns-(or-both)">Missing values: Retrieving from other datasets or through merging columns (or both) </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#An-Exploratory-data-analysis-of-the-US-dataset">An Exploratory data analysis of the US dataset </a></li>
<li class="toc-entry toc-h1"><a href="#Basic-triad-of-the-dataset:-validating-data-types-and-data-integrity-of-each-row">Basic triad of the dataset: validating data types and data integrity of each row </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Graphical-Exploratory-Analysis">Graphical Exploratory Analysis </a></li>
<li class="toc-entry toc-h2"><a href="#Analysis-of-Hospitalizations-by-State">Analysis of Hospitalizations by State </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Since-the-normality-of-the-independent-variables-is-highly-variable-do-to-temporal-and-precision-differences-from-each-state,-we-further-assess-each-state's-data-by-viewing-trends-on-the-independent-variables-in-both-scatter-and-box-and-whisker-plots.">Since the normality of the independent variables is highly variable do to temporal and precision differences from each state, we further assess each state&#39;s data by viewing trends on the independent variables in both scatter and box-and-whisker plots. </a></li>
<li class="toc-entry toc-h3"><a href="#New-York:">New York: </a></li>
<li class="toc-entry toc-h3"><a href="#California:">California: </a></li>
<li class="toc-entry toc-h3"><a href="#Texas:">Texas: </a></li>
<li class="toc-entry toc-h3"><a href="#South-Carolina:">South Carolina: </a></li>
<li class="toc-entry toc-h3"><a href="#Nevada:">Nevada: </a></li>
<li class="toc-entry toc-h3"><a href="#Arizona:">Arizona: </a></li>
<li class="toc-entry toc-h3"><a href="#Mississippi:">Mississippi: </a></li>
<li class="toc-entry toc-h3"><a href="#Utah:">Utah: </a></li>
<li class="toc-entry toc-h3"><a href="#Georgia:">Georgia: </a></li>
<li class="toc-entry toc-h3"><a href="#Alabama:">Alabama: </a></li>
<li class="toc-entry toc-h3"><a href="#Oklahoma:">Oklahoma: </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#Assessing-Correlation-of-Independent-Variables">Assessing Correlation of Independent Variables </a></li>
<li class="toc-entry toc-h2"><a href="#Build-model-for-dependent-Variable">Build model for dependent Variable </a></li>
</ul>
</li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-06-27-COVID19-USA-Hospitilizations.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Covid-Tracking-Dataset-(w/-hospitalised-data)">
<a class="anchor" href="#Covid-Tracking-Dataset-(w/-hospitalised-data)" aria-hidden="true"><span class="octicon octicon-link"></span></a>Covid Tracking Dataset (w/ hospitalised data)<a class="anchor-link" href="#Covid-Tracking-Dataset-(w/-hospitalised-data)"> </a>
</h1>
<p>Source: <a href="https://covidtracking.com/">https://covidtracking.com/</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Load-and-Clean-the-Data">
<a class="anchor" href="#Load-and-Clean-the-Data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Load and Clean the Data<a class="anchor-link" href="#Load-and-Clean-the-Data"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Missing-values:-Retrieving-from-other-datasets-or-through-merging-columns-(or-both)">
<a class="anchor" href="#Missing-values:-Retrieving-from-other-datasets-or-through-merging-columns-(or-both)" aria-hidden="true"><span class="octicon octicon-link"></span></a>Missing values: Retrieving from other datasets or through merging columns (or both)<a class="anchor-link" href="#Missing-values:-Retrieving-from-other-datasets-or-through-merging-columns-(or-both)"> </a>
</h2>
<p>The following will be done:</p>
<ul>
<li>
<strong>Active Cases</strong>: Retrieved from JHU dataset and calculating $active = pos-dead-recovered$</li>
<li>
<strong>Beds per State</strong>: Retrieved from External Datasets</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TODO </span>
<span class="n">all_cases</span><span class="p">[</span><span class="s1">'active'</span><span class="p">]</span> <span class="o">=</span> <span class="n">all_cases</span><span class="p">[</span><span class="s1">'positive'</span><span class="p">]</span> <span class="o">-</span> <span class="n">all_cases</span><span class="p">[</span><span class="s1">'recovered'</span><span class="p">]</span> <span class="o">-</span> <span class="n">all_cases</span><span class="p">[</span><span class="s1">'death'</span><span class="p">]</span>
<span class="c1"># change location of 'active' column</span>
<span class="n">cols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">all_cases</span><span class="p">)</span>
<span class="n">cols</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">cols</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">'active'</span><span class="p">)))</span>
<span class="n">all_cases</span> <span class="o">=</span> <span class="n">all_cases</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">cols</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Load datasets for US population and Hospital beds per 1000</span>
<span class="n">us_population</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'data/us_population.csv'</span><span class="p">)</span>
<span class="n">hosp_beds</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'data/hospital_beds.csv'</span><span class="p">)</span>
<span class="n">state_abbrev</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'data/us_state_names.csv'</span><span class="p">)</span>

<span class="c1"># add state abbreviations to us_population and hospital beds dataframe</span>
<span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">state_abbrev</span><span class="p">[</span><span class="s1">'State'</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">():</span>
    <span class="c1"># store state abbreviation in variable</span>
    <span class="n">abbrev</span> <span class="o">=</span> <span class="n">state_abbrev</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">state_abbrev</span><span class="p">[</span><span class="s1">'State'</span><span class="p">]</span> <span class="o">==</span> <span class="n">state</span><span class="p">,</span> <span class="s1">'Abbreviation'</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># add abbrev to new column 'Abbreviation' in us_population df</span>
    <span class="n">us_population</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">us_population</span><span class="p">[</span><span class="s1">'State'</span><span class="p">]</span> <span class="o">==</span> <span class="n">state</span><span class="p">,</span> <span class="s1">'Abbreviation'</span><span class="p">]</span> <span class="o">=</span> <span class="n">abbrev</span>
    <span class="c1"># add abbrev to new column in hosp_beds df</span>
    <span class="n">hosp_beds</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">hosp_beds</span><span class="p">[</span><span class="s1">'Location'</span><span class="p">]</span> <span class="o">==</span> <span class="n">state</span><span class="p">,</span> <span class="s1">'Abbreviation'</span><span class="p">]</span> <span class="o">=</span> <span class="n">abbrev</span>
    
<span class="c1"># change order of columns of us_population</span>
<span class="n">cols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">us_population</span><span class="p">)</span>
<span class="n">cols</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">cols</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">'Abbreviation'</span><span class="p">)))</span>
<span class="n">us_population</span> <span class="o">=</span> <span class="n">us_population</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">cols</span><span class="p">]</span>

<span class="c1"># drop unnecessary columns of us_population</span>
<span class="n">us_population</span> <span class="o">=</span> <span class="n">us_population</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'rank'</span><span class="p">,</span> <span class="s1">'Growth'</span><span class="p">,</span> <span class="s1">'Pop2018'</span><span class="p">,</span> <span class="s1">'Pop2010'</span><span class="p">,</span> <span class="s1">'growthSince2010'</span><span class="p">,</span> <span class="s1">'Percent'</span><span class="p">,</span> <span class="s1">'density'</span><span class="p">])</span>

<span class="c1"># drop unnecessary columns of hosp_beds</span>
<span class="n">hosp_beds</span> <span class="o">=</span> <span class="n">hosp_beds</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Location'</span><span class="p">,</span> <span class="s1">'State/Local Government'</span><span class="p">,</span> <span class="s1">'Non-Profit'</span><span class="p">,</span> <span class="s1">'For-Profit'</span><span class="p">])</span>

<span class="c1"># change order of columns of hosp_beds</span>
<span class="n">cols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">hosp_beds</span><span class="p">)</span>
<span class="n">cols</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">cols</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">'Abbreviation'</span><span class="p">)))</span>
<span class="n">hosp_beds</span> <span class="o">=</span> <span class="n">hosp_beds</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">cols</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># filter out non-existing states like 'AS'</span>
<span class="n">all_cases</span> <span class="o">=</span> <span class="n">all_cases</span><span class="p">[</span><span class="n">all_cases</span><span class="p">[</span><span class="s1">'state'</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">state_abbrev</span><span class="p">[</span><span class="s1">'Abbreviation'</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Split dataframes by date</span>
<span class="n">df_split_by_date</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">all_cases</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'date'</span><span class="p">)))</span>

<span class="c1"># Split dataframes by state</span>
<span class="n">df_split_by_state</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">all_cases</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'state'</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># merge dataframes us_population and all_cases</span>
<span class="n">df_merge_uspop</span> <span class="o">=</span> <span class="n">all_cases</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">us_population</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">'left'</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s1">'state'</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s1">'Abbreviation'</span><span class="p">)</span>
<span class="n">df_merge_uspop</span> <span class="o">=</span> <span class="n">df_merge_uspop</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Abbreviation'</span><span class="p">])</span>
<span class="n">df_merge_uspop</span> <span class="o">=</span> <span class="n">df_merge_uspop</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">'Pop'</span><span class="p">:</span> <span class="s1">'population'</span><span class="p">})</span>

<span class="c1"># change location of 'population' column</span>
<span class="n">cols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">df_merge_uspop</span><span class="p">)</span>
<span class="n">cols</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">cols</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">'population'</span><span class="p">)))</span>
<span class="n">df_merge_uspop</span> <span class="o">=</span> <span class="n">df_merge_uspop</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">cols</span><span class="p">]</span>

<span class="c1"># merge dataframes hosp_beds and df_merge_uspop</span>
<span class="n">df_merge_hosp</span> <span class="o">=</span> <span class="n">df_merge_uspop</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">hosp_beds</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">'left'</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s1">'state'</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s1">'Abbreviation'</span><span class="p">)</span>
<span class="n">df_merge_hosp</span> <span class="o">=</span> <span class="n">df_merge_hosp</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Abbreviation'</span><span class="p">])</span>
<span class="n">all_cases</span> <span class="o">=</span> <span class="n">df_merge_hosp</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">'Total'</span><span class="p">:</span> <span class="s1">'bedsPerThousand'</span><span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">all_cases</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>state</th>
      <th>population</th>
      <th>positive</th>
      <th>active</th>
      <th>hospitalizedCurrently</th>
      <th>hospitalizedCumulative</th>
      <th>inIcuCurrently</th>
      <th>onVentilatorCurrently</th>
      <th>recovered</th>
      <th>...</th>
      <th>negativeTestsViral</th>
      <th>positiveCasesViral</th>
      <th>commercialScore</th>
      <th>negativeRegularScore</th>
      <th>negativeScore</th>
      <th>positiveScore</th>
      <th>score</th>
      <th>grade</th>
      <th>State</th>
      <th>bedsPerThousand</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-06-27</td>
      <td>AK</td>
      <td>734002</td>
      <td>854.000</td>
      <td>319.000</td>
      <td>11.000</td>
      <td>nan</td>
      <td>nan</td>
      <td>1.000</td>
      <td>521.000</td>
      <td>...</td>
      <td>nan</td>
      <td>nan</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>nan</td>
      <td>Alaska</td>
      <td>2.200</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-06-27</td>
      <td>AL</td>
      <td>4908621</td>
      <td>35083.000</td>
      <td>15298.000</td>
      <td>655.000</td>
      <td>2697.000</td>
      <td>nan</td>
      <td>nan</td>
      <td>18866.000</td>
      <td>...</td>
      <td>nan</td>
      <td>34605.000</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>nan</td>
      <td>Alabama</td>
      <td>3.100</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-06-27</td>
      <td>AR</td>
      <td>3038999</td>
      <td>18740.000</td>
      <td>5707.000</td>
      <td>284.000</td>
      <td>1337.000</td>
      <td>nan</td>
      <td>63.000</td>
      <td>12784.000</td>
      <td>...</td>
      <td>nan</td>
      <td>18740.000</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>nan</td>
      <td>Arkansas</td>
      <td>3.200</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-06-27</td>
      <td>AZ</td>
      <td>7378494</td>
      <td>70051.000</td>
      <td>59813.000</td>
      <td>2577.000</td>
      <td>4595.000</td>
      <td>657.000</td>
      <td>433.000</td>
      <td>8659.000</td>
      <td>...</td>
      <td>nan</td>
      <td>69641.000</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>nan</td>
      <td>Arizona</td>
      <td>1.900</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-06-27</td>
      <td>CA</td>
      <td>39937489</td>
      <td>206433.000</td>
      <td>nan</td>
      <td>5790.000</td>
      <td>nan</td>
      <td>1562.000</td>
      <td>nan</td>
      <td>nan</td>
      <td>...</td>
      <td>nan</td>
      <td>206433.000</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>nan</td>
      <td>California</td>
      <td>1.800</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 28 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Calculate the total beds, and add the column</span>
<span class="n">all_cases</span><span class="p">[</span><span class="s1">'total_beds'</span><span class="p">]</span> <span class="o">=</span> <span class="n">all_cases</span><span class="p">[</span><span class="s1">'population'</span><span class="p">]</span> <span class="o">/</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">all_cases</span><span class="p">[</span><span class="s1">'bedsPerThousand'</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># change abbreviations to state names</span>
<span class="n">all_cases</span> <span class="o">=</span> <span class="n">all_cases</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">'state'</span><span class="p">:</span> <span class="s1">'abbrev'</span><span class="p">})</span>
<span class="n">all_cases</span> <span class="o">=</span> <span class="n">all_cases</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">'State'</span><span class="p">:</span> <span class="s1">'state'</span><span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># change location of 'state' column</span>
<span class="n">cols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">all_cases</span><span class="p">)</span>
<span class="n">cols</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">'state'</span><span class="p">)))</span>
<span class="n">all_cases</span> <span class="o">=</span> <span class="n">all_cases</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">cols</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#print data frame head for spot visual data verification</span>
<span class="n">all_cases</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>state</th>
      <th>abbrev</th>
      <th>population</th>
      <th>positive</th>
      <th>active</th>
      <th>hospitalizedCurrently</th>
      <th>hospitalizedCumulative</th>
      <th>inIcuCurrently</th>
      <th>onVentilatorCurrently</th>
      <th>...</th>
      <th>negativeTestsViral</th>
      <th>positiveCasesViral</th>
      <th>commercialScore</th>
      <th>negativeRegularScore</th>
      <th>negativeScore</th>
      <th>positiveScore</th>
      <th>score</th>
      <th>grade</th>
      <th>bedsPerThousand</th>
      <th>total_beds</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-06-27</td>
      <td>Alaska</td>
      <td>AK</td>
      <td>734002</td>
      <td>854.000</td>
      <td>319.000</td>
      <td>11.000</td>
      <td>nan</td>
      <td>nan</td>
      <td>1.000</td>
      <td>...</td>
      <td>nan</td>
      <td>nan</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>nan</td>
      <td>2.200</td>
      <td>1614.804</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-06-27</td>
      <td>Alabama</td>
      <td>AL</td>
      <td>4908621</td>
      <td>35083.000</td>
      <td>15298.000</td>
      <td>655.000</td>
      <td>2697.000</td>
      <td>nan</td>
      <td>nan</td>
      <td>...</td>
      <td>nan</td>
      <td>34605.000</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>nan</td>
      <td>3.100</td>
      <td>15216.725</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-06-27</td>
      <td>Arkansas</td>
      <td>AR</td>
      <td>3038999</td>
      <td>18740.000</td>
      <td>5707.000</td>
      <td>284.000</td>
      <td>1337.000</td>
      <td>nan</td>
      <td>63.000</td>
      <td>...</td>
      <td>nan</td>
      <td>18740.000</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>nan</td>
      <td>3.200</td>
      <td>9724.797</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-06-27</td>
      <td>Arizona</td>
      <td>AZ</td>
      <td>7378494</td>
      <td>70051.000</td>
      <td>59813.000</td>
      <td>2577.000</td>
      <td>4595.000</td>
      <td>657.000</td>
      <td>433.000</td>
      <td>...</td>
      <td>nan</td>
      <td>69641.000</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>nan</td>
      <td>1.900</td>
      <td>14019.139</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-06-27</td>
      <td>California</td>
      <td>CA</td>
      <td>39937489</td>
      <td>206433.000</td>
      <td>200561.000</td>
      <td>5790.000</td>
      <td>nan</td>
      <td>1562.000</td>
      <td>nan</td>
      <td>...</td>
      <td>nan</td>
      <td>206433.000</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>nan</td>
      <td>1.800</td>
      <td>71887.480</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 29 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Load and clean JHU data</li>
<li>Merge JHU dataset with main dataset</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># This cell takes some time, as it needs to connect to Kaggle Servers to retrieve data</span>
<span class="n">kaggle</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">authenticate</span><span class="p">()</span>
<span class="n">kaggle</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">dataset_download_files</span><span class="p">(</span><span class="s1">'benhamner/jhucovid19'</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">'./kaggle/input/jhucovid19/'</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Get Time-Series Data of cases as Pandas DataFrame</span>
<span class="n">dir_jhu</span> <span class="o">=</span> <span class="s1">'./kaggle/input/jhucovid19/csse_covid_19_data/csse_covid_19_daily_reports'</span>

<span class="n">df_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">dirname</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">dir_jhu</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">'gitignore'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">file</span> <span class="ow">and</span> <span class="s1">'README'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">full_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirname</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
            <span class="n">df_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">full_dir</span><span class="p">))</span>
            
<span class="n">jhu_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">df_list</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># convert Last Update columns to datetime format</span>
<span class="n">jhu_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">'Last Update'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">jhu_df</span><span class="p">[</span><span class="s1">'Last Update'</span><span class="p">])</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">date</span><span class="p">())</span>
<span class="n">jhu_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">'Last_Update'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">jhu_df</span><span class="p">[</span><span class="s1">'Last_Update'</span><span class="p">])</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">date</span><span class="p">())</span>

<span class="c1"># Combine Last Update with Last_Update</span>
<span class="n">jhu_df</span><span class="p">[</span><span class="s1">'LastUpdate'</span><span class="p">]</span> <span class="o">=</span> <span class="n">jhu_df</span><span class="p">[</span><span class="s1">'Last_Update'</span><span class="p">]</span><span class="o">.</span><span class="n">combine_first</span><span class="p">(</span><span class="n">jhu_df</span><span class="p">[</span><span class="s1">'Last Update'</span><span class="p">])</span>

<span class="c1"># Combine Country/Region with Country_Region</span>
<span class="n">jhu_df</span><span class="p">[</span><span class="s1">'CountryRegion'</span><span class="p">]</span> <span class="o">=</span> <span class="n">jhu_df</span><span class="p">[</span><span class="s1">'Country/Region'</span><span class="p">]</span><span class="o">.</span><span class="n">combine_first</span><span class="p">(</span><span class="n">jhu_df</span><span class="p">[</span><span class="s1">'Country_Region'</span><span class="p">])</span>

<span class="c1"># Retrieve only US data</span>
<span class="n">jhu_df</span> <span class="o">=</span> <span class="n">jhu_df</span><span class="p">[</span><span class="n">jhu_df</span><span class="p">[</span><span class="s1">'CountryRegion'</span><span class="p">]</span><span class="o">==</span><span class="s1">'US'</span><span class="p">]</span>

<span class="c1"># Combine Province/State with Province_State</span>
<span class="n">jhu_df</span><span class="p">[</span><span class="s1">'ProvinceState'</span><span class="p">]</span> <span class="o">=</span> <span class="n">jhu_df</span><span class="p">[</span><span class="s1">'Province/State'</span><span class="p">]</span><span class="o">.</span><span class="n">combine_first</span><span class="p">(</span><span class="n">jhu_df</span><span class="p">[</span><span class="s1">'Province_State'</span><span class="p">])</span>

<span class="c1"># Drop unnecessary columns</span>
<span class="n">jhu_df</span> <span class="o">=</span> <span class="n">jhu_df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">'Admin2'</span><span class="p">,</span> <span class="s1">'Lat'</span><span class="p">,</span> <span class="s1">'Latitude'</span><span class="p">,</span> <span class="s1">'Long_'</span><span class="p">,</span> <span class="s1">'Longitude'</span><span class="p">,</span> <span class="s1">'Combined_Key'</span><span class="p">,</span> <span class="s1">'Country/Region'</span><span class="p">,</span>
                      <span class="s1">'Country_Region'</span><span class="p">,</span> <span class="s1">'Province/State'</span><span class="p">,</span> <span class="s1">'Province_State'</span><span class="p">,</span>
                      <span class="s1">'Last Update'</span><span class="p">,</span> <span class="s1">'Last_Update'</span><span class="p">,</span> <span class="s1">'FIPS'</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Change column order</span>
<span class="n">cols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">jhu_df</span><span class="p">)</span>
<span class="n">cols</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">cols</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">'CountryRegion'</span><span class="p">)))</span>
<span class="n">cols</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">'ProvinceState'</span><span class="p">)))</span>
<span class="n">cols</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">cols</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">'LastUpdate'</span><span class="p">)))</span>
<span class="n">jhu_df</span> <span class="o">=</span> <span class="n">jhu_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">cols</span><span class="p">]</span>

<span class="c1"># Change region to known US states</span>
<span class="n">state_abbrs_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">us</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">STATES</span><span class="p">:</span>
    <span class="n">state_abbrs_dict</span><span class="p">[</span><span class="n">state</span><span class="o">.</span><span class="n">abbr</span><span class="p">]</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">name</span>

<span class="k">def</span> <span class="nf">toState</span><span class="p">(</span><span class="n">input_state</span><span class="p">,</span> <span class="n">mapping</span><span class="p">):</span>
    <span class="n">abbreviation</span> <span class="o">=</span> <span class="n">input_state</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">return_value</span> <span class="o">=</span> <span class="n">mapping</span><span class="p">[</span><span class="n">abbreviation</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="n">return_value</span> <span class="o">=</span> <span class="n">input_state</span>
    <span class="k">return</span> <span class="n">return_value</span>

<span class="n">jhu_df</span><span class="p">[</span><span class="s1">'ProvinceState'</span><span class="p">]</span> <span class="o">=</span> <span class="n">jhu_df</span><span class="p">[</span><span class="s1">'ProvinceState'</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">toState</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">state_abbrs_dict</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="s1">'Washington, D.C.'</span> <span class="k">else</span> <span class="s1">'District of Columbia'</span><span class="p">)</span>

<span class="c1"># Filter out unknown states</span>
<span class="n">jhu_df</span> <span class="o">=</span> <span class="n">jhu_df</span><span class="p">[</span><span class="n">jhu_df</span><span class="p">[</span><span class="s1">'ProvinceState'</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">all_cases</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">())]</span>

<span class="c1"># Merge-sum rows with same date and State</span>
<span class="n">jhu_df</span> <span class="o">=</span> <span class="n">jhu_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">'LastUpdate'</span><span class="p">,</span> <span class="s1">'ProvinceState'</span><span class="p">])</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s1">'Active'</span><span class="p">:</span> <span class="nb">sum</span><span class="p">,</span>
        <span class="s1">'Confirmed'</span><span class="p">:</span> <span class="nb">sum</span><span class="p">,</span>
        <span class="s1">'Deaths'</span><span class="p">:</span> <span class="nb">sum</span><span class="p">,</span>
        <span class="s1">'Recovered'</span><span class="p">:</span> <span class="nb">sum</span>
    <span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">jhu_df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>LastUpdate</th>
      <th>ProvinceState</th>
      <th>Active</th>
      <th>Confirmed</th>
      <th>Deaths</th>
      <th>Recovered</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5190</th>
      <td>2020-06-19</td>
      <td>Virginia</td>
      <td>54652.000</td>
      <td>56238.000</td>
      <td>1586.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>5191</th>
      <td>2020-06-19</td>
      <td>Washington</td>
      <td>25947.000</td>
      <td>27192.000</td>
      <td>1245.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>5192</th>
      <td>2020-06-19</td>
      <td>West Virginia</td>
      <td>2330.000</td>
      <td>2418.000</td>
      <td>88.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>5193</th>
      <td>2020-06-19</td>
      <td>Wisconsin</td>
      <td>23157.000</td>
      <td>23876.000</td>
      <td>719.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>5194</th>
      <td>2020-06-19</td>
      <td>Wyoming</td>
      <td>1126.000</td>
      <td>1144.000</td>
      <td>18.000</td>
      <td>0.000</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Now that we have the JHU dataset relatively cleaned</span>
<span class="c1"># we can go ahead and merge its data with our main dataset</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">all_cases</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">last_update</span> <span class="o">=</span> <span class="n">all_cases</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">'date'</span><span class="p">]</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">all_cases</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">'state'</span><span class="p">]</span>
    <span class="n">matching_row</span> <span class="o">=</span> <span class="n">jhu_df</span><span class="p">[</span><span class="n">jhu_df</span><span class="p">[</span><span class="s1">'ProvinceState'</span><span class="p">]</span> <span class="o">==</span> <span class="n">state</span><span class="p">]</span>
    <span class="n">matching_row</span> <span class="o">=</span> <span class="n">matching_row</span><span class="p">[</span><span class="n">matching_row</span><span class="p">[</span><span class="s1">'LastUpdate'</span><span class="p">]</span> <span class="o">==</span> <span class="n">last_update</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matching_row</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1">#all_cases.at[i, 'positive'] = matching_row['Confirmed'].values[0]</span>
        <span class="n">all_cases</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">]</span> <span class="o">=</span> <span class="n">matching_row</span><span class="p">[</span><span class="s1">'Active'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1">#all_cases.at[i, 'recovered'] = matching_row['Recovered'].values[0]   --- JHU was inconsistent, therefore removed</span>
        <span class="c1">#all_cases.at[i, 'death'] = matching_row['Deaths'].values[0]</span>

    <span class="c1"># Replace unknown recovery numbers with 0</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">'recovered'</span><span class="p">]):</span>
        <span class="n">all_cases</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">if</span> <span class="n">all_cases</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">'active'</span><span class="p">]):</span>
        <span class="n">positive</span> <span class="o">=</span> <span class="n">all_cases</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">'positive'</span><span class="p">]</span>
        <span class="n">recovered</span> <span class="o">=</span> <span class="n">all_cases</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">]</span>
        <span class="n">dead</span> <span class="o">=</span> <span class="n">all_cases</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">]</span>
        <span class="n">all_cases</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">]</span> <span class="o">=</span> <span class="n">positive</span> <span class="o">-</span> <span class="n">recovered</span> <span class="o">-</span> <span class="n">dead</span>

<span class="n">all_cases</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Save formatted dataset offline in case of disaster</span>
<span class="n">dataset_file</span> <span class="o">=</span> <span class="s1">'results/all_cases.csv'</span>
<span class="n">all_cases</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">dataset_file</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># convert date to datetime format</span>
<span class="n">all_cases</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">all_cases</span><span class="p">[</span><span class="s1">'date'</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="An-Exploratory-data-analysis-of-the-US-dataset">
<a class="anchor" href="#An-Exploratory-data-analysis-of-the-US-dataset" aria-hidden="true"><span class="octicon octicon-link"></span></a>An Exploratory data analysis of the US dataset<a class="anchor-link" href="#An-Exploratory-data-analysis-of-the-US-dataset"> </a>
</h1>
<h1 id="Basic-triad-of-the-dataset:-validating-data-types-and-data-integrity-of-each-row">
<a class="anchor" href="#Basic-triad-of-the-dataset:-validating-data-types-and-data-integrity-of-each-row" aria-hidden="true"><span class="octicon octicon-link"></span></a>Basic triad of the dataset: validating data types and data integrity of each row<a class="anchor-link" href="#Basic-triad-of-the-dataset:-validating-data-types-and-data-integrity-of-each-row"> </a>
</h1>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dataset_file</span> <span class="o">=</span> <span class="s1">'results/all_cases.csv'</span>
<span class="n">covid_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">dataset_file</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> 
<span class="c1"># convert date to datetime format</span>
<span class="n">covid_df</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'date'</span><span class="p">])</span>
<span class="n">covid_df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
<span class="c1"># set float format to 3 decimals</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">'display.float_format'</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">'</span><span class="si">%.3f</span><span class="s1">'</span> <span class="o">%</span> <span class="n">x</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">covid_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The NaN values may indicate that there were no to few Covid-19 patients at these date points.
We further analyse the statistical values of the dataset columns to ensure data integrity and accuracy.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">covid_df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="c1"># TODO rounding up the numbers</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># drop unnecessary columns</span>
<span class="n">covid_cleaned</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">'hospitalized'</span><span class="p">,</span> <span class="s1">'bedsPerThousand'</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">covid_100k</span> <span class="o">=</span> <span class="n">covid_cleaned</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="c1"># list of columns to transform to per 100k</span>
<span class="n">columns_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'hospitalizedCumulative'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'onVentilatorCurrently'</span><span class="p">,</span> <span class="s1">'total_beds'</span><span class="p">]</span>
<span class="c1"># add columns per 100k</span>
<span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">columns_list</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">column</span> <span class="o">==</span> <span class="s1">'total_beds'</span><span class="p">:</span>
        <span class="n">covid_100k</span><span class="p">[</span><span class="s1">'BedsPer100k'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">column</span><span class="p">)]</span> <span class="o">=</span> <span class="p">(</span><span class="n">covid_cleaned</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">column</span><span class="p">]</span> <span class="o">/</span> <span class="n">covid_cleaned</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">'population'</span><span class="p">])</span> <span class="o">*</span> <span class="mi">100000</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">covid_100k</span><span class="p">[</span><span class="s1">'</span><span class="si">{}</span><span class="s1">_100k'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">column</span><span class="p">)]</span> <span class="o">=</span> <span class="p">(</span><span class="n">covid_cleaned</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">column</span><span class="p">]</span> <span class="o">/</span> <span class="n">covid_cleaned</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">'population'</span><span class="p">])</span> <span class="o">*</span> <span class="mi">100000</span>

<span class="n">covid_100k</span> <span class="o">=</span> <span class="n">covid_100k</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns_list</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">covid_100k</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">covid_100k</span><span class="p">[</span><span class="s1">'date'</span><span class="p">])</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="s1">'2020-04-18'</span>
<span class="n">end_date</span> <span class="o">=</span> <span class="s1">'2020-05-19'</span>
<span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">covid_100k</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">start_date</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">covid_100k</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">end_date</span><span class="p">)</span>
<span class="n">covid_100k_last_month</span> <span class="o">=</span> <span class="n">covid_100k</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">covid_100k_last_month_part1</span> <span class="o">=</span>  <span class="n">covid_100k_last_month</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'date'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">'positive_100k'</span><span class="p">,</span><span class="s1">'active_100k'</span><span class="p">,</span><span class="s1">'recovered_100k'</span><span class="p">,</span><span class="s1">'death_100k'</span><span class="p">,</span><span class="s1">'hospitalizedCumulative_100k'</span><span class="p">]]</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">periods</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">covid_100k_last_month_part2</span> <span class="o">=</span> <span class="n">covid_100k_last_month</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'date'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">'inIcuCurrently_100k'</span><span class="p">,</span><span class="s1">'onVentilatorCurrently_100k'</span><span class="p">,</span><span class="s1">'BedsPer100k'</span><span class="p">]]</span>

<span class="n">final_100k_last_month</span> <span class="o">=</span> <span class="n">covid_100k_last_month_part1</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">covid_100k_last_month_part2</span><span class="p">,</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">final_100k_last_month</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">final_100k_last_month</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># save description cleaned dataset to csv</span>
<span class="n">describe_file</span> <span class="o">=</span> <span class="s1">'results/final_100k_last_month.csv'</span>
<span class="n">final_100k_last_month</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">describe_file</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Graphical-Exploratory-Analysis">
<a class="anchor" href="#Graphical-Exploratory-Analysis" aria-hidden="true"><span class="octicon octicon-link"></span></a>Graphical Exploratory Analysis<a class="anchor-link" href="#Graphical-Exploratory-Analysis"> </a>
</h2>
<p>Plotting histograms, scatterplots and boxplots to assess the distribution of the entire US dataset.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Omitting the categorical (states/abbreviations) and time columns </span>
<span class="c1"># There must be an easier way for you, but this was the easiest way I could think of</span>
<span class="n">covid_cleaned</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">covid_cleaned</span><span class="p">[</span><span class="s1">'date'</span><span class="p">])</span>
<span class="c1"># mask data for last month</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="s1">'2020-04-18'</span>
<span class="n">end_date</span> <span class="o">=</span> <span class="s1">'2020-05-19'</span>
<span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">covid_cleaned</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">start_date</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">covid_cleaned</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">end_date</span><span class="p">)</span>
<span class="n">covid_cleaned_last_month</span> <span class="o">=</span> <span class="n">covid_cleaned</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">plot_df</span> <span class="o">=</span> <span class="n">covid_cleaned_last_month</span><span class="p">[[</span><span class="s1">'population'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'onVentilatorCurrently'</span><span class="p">,</span> <span class="s1">'total_beds'</span><span class="p">]]</span>
<span class="n">plot_df_last_month</span> <span class="o">=</span> <span class="n">covid_100k_last_month</span><span class="p">[[</span><span class="s1">'population'</span><span class="p">,</span> <span class="s1">'active_100k'</span><span class="p">,</span> <span class="s1">'recovered_100k'</span><span class="p">,</span> <span class="s1">'death_100k'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently_100k'</span><span class="p">,</span> <span class="s1">'inIcuCurrently_100k'</span><span class="p">,</span> <span class="s1">'onVentilatorCurrently_100k'</span><span class="p">,</span> <span class="s1">'BedsPer100k'</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">timeseries_usa_df</span> <span class="o">=</span> <span class="n">covid_100k</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">'date'</span><span class="p">,</span> <span class="s1">'positive_100k'</span><span class="p">,</span> <span class="s1">'active_100k'</span><span class="p">,</span> <span class="s1">'recovered_100k'</span><span class="p">,</span> <span class="s1">'death_100k'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently_100k'</span><span class="p">,</span> <span class="s1">'inIcuCurrently_100k'</span><span class="p">,</span> <span class="s1">'onVentilatorCurrently_100k'</span><span class="p">,</span> <span class="s1">'BedsPer100k'</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'date'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="c1"># timeseries_usa_df['log_positive'] = np.log(timeseries_usa_df['positive_100k'])</span>
<span class="c1"># timeseries_usa_df['log_active'] = np.log(timeseries_usa_df['active_100k'])</span>
<span class="c1"># timeseries_usa_df['log_recovered'] = np.log(timeseries_usa_df['recovered_100k'])</span>
<span class="c1"># timeseries_usa_df['log_death'] = np.log(timeseries_usa_df['death_100k'])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">timeseries_usa_df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Timeseries plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">covid_df</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">hospitalizedCurrently</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'Number of USA Patients Currently in ICU'</span><span class="p">)</span>
<span class="c1"># TODO change the X-axis to chip the year</span>
<span class="c1"># TODO which timeseries plots do we need?</span>
<span class="c1"># TODO how to temporarily remove the outliers?</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># get data from last day</span>
<span class="c1"># plot_df_last_date = plot_df.loc[covid_df['date'] == '2020-05-18'] </span>

<span class="c1"># Plotting histograms to gain insight of the distribution shape, skewness and scale</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">plot_df_last_month</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[(</span><span class="n">i</span><span class="o">//</span><span class="mi">2</span><span class="p">),</span> <span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[(</span><span class="n">i</span><span class="o">//</span><span class="mi">2</span><span class="p">),</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">plot_df_last_month</span><span class="p">[</span><span class="n">column</span><span class="p">],</span> <span class="n">fit</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span> <span class="n">fit_kws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">'normality'</span><span class="p">),</span> <span class="n">hist_kws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">'plum'</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">'k'</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">'frequency'</span><span class="p">),</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'#9d53ad'</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">'upper right'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Looking at linearity and variance with scatterplots</span>
<span class="c1"># Removing the target variable and saving it in another df</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">plot_df</span><span class="o">.</span><span class="n">hospitalizedCurrently</span>
<span class="n">indep_var</span> <span class="o">=</span> <span class="n">plot_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'hospitalizedCurrently'</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">indep_var</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">indep_var</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">target</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">indep_var</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">'s'</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"plum"</span><span class="p">,</span> <span class="s1">'label'</span><span class="p">:</span> <span class="s1">'hospitCurr'</span><span class="p">})</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Scatterplots with Target Hospitalized Patients Showing Growth Trajectories'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Assessing the normality of the distribution with a boxplot</span>
<span class="c1"># Boxplot with removed outliers</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">plot_df</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">plot_df</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">plot_df</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'lightblue'</span><span class="p">,</span> <span class="n">showfliers</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Boxplots of Independent Variables'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># get data from last day</span>
<span class="n">plot_df_last_date</span> <span class="o">=</span> <span class="n">plot_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'2020-05-18'</span><span class="p">]</span> 

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">plot_df_last_date</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">plot_df_last_date</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">plot_df</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'lightblue'</span><span class="p">,</span> <span class="n">showfliers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Boxplots of Independent Variables'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Analysis-of-Hospitalizations-by-State">
<a class="anchor" href="#Analysis-of-Hospitalizations-by-State" aria-hidden="true"><span class="octicon octicon-link"></span></a>Analysis of Hospitalizations by State<a class="anchor-link" href="#Analysis-of-Hospitalizations-by-State"> </a>
</h2>
<h3 id="Since-the-normality-of-the-independent-variables-is-highly-variable-do-to-temporal-and-precision-differences-from-each-state,-we-further-assess-each-state's-data-by-viewing-trends-on-the-independent-variables-in-both-scatter-and-box-and-whisker-plots.">
<a class="anchor" href="#Since-the-normality-of-the-independent-variables-is-highly-variable-do-to-temporal-and-precision-differences-from-each-state,-we-further-assess-each-state's-data-by-viewing-trends-on-the-independent-variables-in-both-scatter-and-box-and-whisker-plots." aria-hidden="true"><span class="octicon octicon-link"></span></a>Since the normality of the independent variables is highly variable do to temporal and precision differences from each state, we further assess each state's data by viewing trends on the independent variables in both scatter and box-and-whisker plots.<a class="anchor-link" href="#Since-the-normality-of-the-independent-variables-is-highly-variable-do-to-temporal-and-precision-differences-from-each-state,-we-further-assess-each-state's-data-by-viewing-trends-on-the-independent-variables-in-both-scatter-and-box-and-whisker-plots."> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="New-York:">
<a class="anchor" href="#New-York:" aria-hidden="true"><span class="octicon octicon-link"></span></a>New York:<a class="anchor-link" href="#New-York:"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Split covid_df into subset with only NY values</span>
<span class="n">new_york</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'abbrev'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'NY'</span><span class="p">]</span> 
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="c1"># Timeseries plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">new_york</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">new_york</span><span class="o">.</span><span class="n">inIcuCurrently</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">3.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Number of Patients in NY Currently Hospitalized in ICU'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">23</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'No. Patients'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Split covid_df into subset with only NY values</span>
<span class="n">new_york</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'abbrev'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'NY'</span><span class="p">]</span> 
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="c1"># Timeseries plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">new_york</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">new_york</span><span class="o">.</span><span class="n">active</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">3.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Number of Active Cases in NY'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">23</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'No. Victims'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Split covid_df into subset with only NY values</span>
<span class="n">new_york</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'abbrev'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'NY'</span><span class="p">]</span> 
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="c1"># Timeseries plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">new_york</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">new_york</span><span class="o">.</span><span class="n">positive</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">3.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Number of Positive Cases in NY'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">23</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'No. Postives'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Split covid_df into subset with only NY values</span>
<span class="n">new_york</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'abbrev'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'NY'</span><span class="p">]</span> 
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="c1"># Timeseries plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">new_york</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">new_york</span><span class="o">.</span><span class="n">recovered</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">3.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Number of Recovered Cases in NY'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">23</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'No. Postives'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Omit the categorical and date cols </span>
<span class="n">new_york</span> <span class="o">=</span> <span class="n">new_york</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'hospitalizedCumulative'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">,</span> <span class="s1">'hospitalized'</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Scatter plots NY</span>
<span class="c1"># Split dependent var from independent variables</span>
<span class="n">target_ny</span> <span class="o">=</span> <span class="n">new_york</span><span class="o">.</span><span class="n">hospitalizedCurrently</span>
<span class="n">indep_var_ny</span> <span class="o">=</span> <span class="n">new_york</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'hospitalizedCurrently'</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">indep_var_ny</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">indep_var_ny</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">target_ny</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">indep_var_ny</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">'s'</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"plum"</span><span class="p">})</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Distributions of Independent Variables NY'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Boxplot of NY</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">new_york</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">new_york</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">new_york</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'lightpink'</span><span class="p">,</span> <span class="n">showfliers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Boxplots of Independent Variables NY'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="California:">
<a class="anchor" href="#California:" aria-hidden="true"><span class="octicon octicon-link"></span></a>California:<a class="anchor-link" href="#California:"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cali</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'abbrev'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'CA'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'state'</span><span class="p">]</span><span class="o">==</span> <span class="s1">'California'</span><span class="p">)]</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TODO fix legend/axis/plot alltogether</span>
<span class="c1"># Timeseries plt</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">cali</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">cali</span><span class="o">.</span><span class="n">hospitalizedCurrently</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Number of Patients in CA Currently Hospitalized'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'No. Patients'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Checking which cols have NaN values</span>
<span class="n">cali</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">,</span> <span class="s1">'hospitalized'</span><span class="p">]]</span>
<span class="n">cali</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1"># Omit the NaN cols</span>
<span class="n">cali</span> <span class="o">=</span> <span class="n">cali</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Scatter plots CA</span>
<span class="c1"># Split dependent var from independent variables</span>
<span class="n">target_ca</span> <span class="o">=</span> <span class="n">cali</span><span class="o">.</span><span class="n">hospitalizedCurrently</span>
<span class="n">indep_var_ca</span> <span class="o">=</span> <span class="n">cali</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'hospitalizedCurrently'</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">indep_var_ca</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">indep_var_ca</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">target_ca</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">indep_var_ca</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">'s'</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"plum"</span><span class="p">})</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Distributions of Independent Variables CA'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Boxplot of CA</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cali</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">cali</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">cali</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'lightpink'</span><span class="p">,</span> <span class="n">showfliers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Boxplots of Independent Variables CA'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">###endcali</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Texas:">
<a class="anchor" href="#Texas:" aria-hidden="true"><span class="octicon octicon-link"></span></a>Texas:<a class="anchor-link" href="#Texas:"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">texas</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'abbrev'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'TX'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'state'</span><span class="p">]</span><span class="o">==</span> <span class="s1">'Texas'</span><span class="p">)]</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TODO fix legend/axis/plot alltogether</span>
<span class="c1"># Timeseries plt</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">texas</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">texas</span><span class="o">.</span><span class="n">hospitalizedCurrently</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Number of Patients in TX Currently Hospitalized'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'No. Patients'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Checking which cols have NaN values</span>
<span class="n">texas</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">,</span> <span class="s1">'hospitalized'</span><span class="p">]]</span>
<span class="n">texas</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1"># Omit the NaN cols</span>
<span class="n">texas</span> <span class="o">=</span> <span class="n">texas</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Scatter plots TX</span>
<span class="c1"># Split dependent var from independent variables</span>
<span class="n">target_tx</span> <span class="o">=</span> <span class="n">texas</span><span class="o">.</span><span class="n">hospitalizedCurrently</span>
<span class="n">indep_var_tx</span> <span class="o">=</span> <span class="n">texas</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'hospitalizedCurrently'</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">indep_var_tx</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">indep_var_tx</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">target_tx</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">indep_var_tx</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">'s'</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"plum"</span><span class="p">})</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Distributions of Independent Variables TX'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Boxplot of TX</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">texas</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">texas</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">texas</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'lightpink'</span><span class="p">,</span> <span class="n">showfliers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Boxplots of Independent Variables TX'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">###endtx</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="South-Carolina:">
<a class="anchor" href="#South-Carolina:" aria-hidden="true"><span class="octicon octicon-link"></span></a>South Carolina:<a class="anchor-link" href="#South-Carolina:"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sc</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'abbrev'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'SC'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'state'</span><span class="p">]</span><span class="o">==</span> <span class="s1">'South Carolina'</span><span class="p">)]</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TODO fix legend/axis/plot alltogether</span>
<span class="c1"># Timeseries plt</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sc</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">sc</span><span class="o">.</span><span class="n">hospitalizedCurrently</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Number of Patients in SC Currently Hospitalized'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'No. Patients'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Checking which cols have NaN values</span>
<span class="n">sc</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">,</span> <span class="s1">'hospitalized'</span><span class="p">]]</span>
<span class="n">sc</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1"># Omit the NaN cols</span>
<span class="n">sc</span> <span class="o">=</span> <span class="n">sc</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Scatter plots SC</span>
<span class="c1"># Split dependent var from independent variables</span>
<span class="n">target_sc</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">hospitalizedCurrently</span>
<span class="n">indep_var_sc</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'hospitalizedCurrently'</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">indep_var_sc</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">indep_var_sc</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">target_sc</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">indep_var_sc</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">'s'</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"plum"</span><span class="p">})</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Distributions of Independent Variables SC'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Boxplot of SC</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sc</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">sc</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">sc</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'lightpink'</span><span class="p">,</span> <span class="n">showfliers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Boxplots of Independent Variables TX'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">###endsouthcarolina</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Nevada:">
<a class="anchor" href="#Nevada:" aria-hidden="true"><span class="octicon octicon-link"></span></a>Nevada:<a class="anchor-link" href="#Nevada:"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nevada</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'abbrev'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'NV'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'state'</span><span class="p">]</span><span class="o">==</span> <span class="s1">'Nevada'</span><span class="p">)]</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TODO fix legend/axis/plot alltogether</span>
<span class="c1"># Timeseries plt</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">nevada</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">nevada</span><span class="o">.</span><span class="n">hospitalizedCurrently</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Number of Patients in NV Currently Hospitalized'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'No. Patients'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Checking which cols have NaN values</span>
<span class="n">nevada</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">,</span> <span class="s1">'hospitalized'</span><span class="p">]]</span>
<span class="n">nevada</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1"># Omit the NaN cols</span>
<span class="n">nevada</span> <span class="o">=</span> <span class="n">nevada</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Scatter plots NV</span>
<span class="c1"># Split dependent var from independent variables</span>
<span class="n">target_nv</span> <span class="o">=</span> <span class="n">nevada</span><span class="o">.</span><span class="n">hospitalizedCurrently</span>
<span class="n">indep_var_nv</span> <span class="o">=</span> <span class="n">nevada</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'hospitalizedCurrently'</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">indep_var_nv</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">indep_var_nv</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">target_nv</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">indep_var_nv</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">'s'</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"plum"</span><span class="p">})</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Distributions of Independent Variables NV'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Boxplot of NV</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nevada</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">nevada</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">nevada</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'lightpink'</span><span class="p">,</span> <span class="n">showfliers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Boxplots of Independent Variables NV'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">###endnevada</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Arizona:">
<a class="anchor" href="#Arizona:" aria-hidden="true"><span class="octicon octicon-link"></span></a>Arizona:<a class="anchor-link" href="#Arizona:"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arizona</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'abbrev'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'AZ'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'state'</span><span class="p">]</span><span class="o">==</span> <span class="s1">'Arizona'</span><span class="p">)]</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TODO fix legend/axis/plot alltogether</span>
<span class="c1"># Timeseries plt</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">arizona</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">arizona</span><span class="o">.</span><span class="n">hospitalizedCurrently</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Number of Patients in AZ Currently Hospitalized'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'No. Patients'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Checking which cols have NaN values</span>
<span class="n">arizona</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">,</span> <span class="s1">'hospitalized'</span><span class="p">]]</span>
<span class="n">arizona</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1"># Omit the NaN cols</span>
<span class="n">arizona</span> <span class="o">=</span> <span class="n">arizona</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Scatter plots AZ</span>
<span class="c1"># Split dependent var from independent variables</span>
<span class="n">target_az</span> <span class="o">=</span> <span class="n">arizona</span><span class="o">.</span><span class="n">hospitalizedCurrently</span>
<span class="n">indep_var_az</span> <span class="o">=</span> <span class="n">arizona</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'hospitalizedCurrently'</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">indep_var_az</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">indep_var_az</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">target_az</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">indep_var_az</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">'s'</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"plum"</span><span class="p">})</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Distributions of Independent Variables AZ'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Boxplot of AZ</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">arizona</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">arizona</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">arizona</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'lightpink'</span><span class="p">,</span> <span class="n">showfliers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Boxplots of Independent Variables AZ'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">###endarizona</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Mississippi:">
<a class="anchor" href="#Mississippi:" aria-hidden="true"><span class="octicon octicon-link"></span></a>Mississippi:<a class="anchor-link" href="#Mississippi:"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mississippi</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'abbrev'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'MS'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'state'</span><span class="p">]</span><span class="o">==</span> <span class="s1">'Mississippi'</span><span class="p">)]</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TODO fix legend/axis/plot alltogether</span>
<span class="c1"># Timeseries plt</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mississippi</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">mississippi</span><span class="o">.</span><span class="n">hospitalizedCurrently</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Number of Patients in MS Currently Hospitalized'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'No. Patients'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Checking which cols have NaN values</span>
<span class="n">mississippi</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">,</span> <span class="s1">'hospitalized'</span><span class="p">]]</span>
<span class="n">mississippi</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1"># Omit the NaN cols</span>
<span class="n">mississippi</span> <span class="o">=</span> <span class="n">mississippi</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Scatter plots MS</span>
<span class="c1"># Split dependent var from independent variables</span>
<span class="n">target_ms</span> <span class="o">=</span> <span class="n">texas</span><span class="o">.</span><span class="n">hospitalizedCurrently</span>
<span class="n">indep_var_ms</span> <span class="o">=</span> <span class="n">texas</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'hospitalizedCurrently'</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">indep_var_ms</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">indep_var_ms</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">target_ms</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">indep_var_ms</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">'s'</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"plum"</span><span class="p">})</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Distributions of Independent Variables MS'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Boxplot of MS</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">texas</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">mississippi</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">mississippi</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'lightpink'</span><span class="p">,</span> <span class="n">showfliers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Boxplots of Independent Variables MS'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">###endmississippi</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Utah:">
<a class="anchor" href="#Utah:" aria-hidden="true"><span class="octicon octicon-link"></span></a>Utah:<a class="anchor-link" href="#Utah:"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">utah</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'abbrev'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'UT'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'state'</span><span class="p">]</span><span class="o">==</span> <span class="s1">'Utah'</span><span class="p">)]</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TODO fix legend/axis/plot alltogether</span>
<span class="c1"># Timeseries plt</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">utah</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">utah</span><span class="o">.</span><span class="n">hospitalizedCurrently</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Number of Patients in UT Currently Hospitalized'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'No. Patients'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Checking which cols have NaN values</span>
<span class="n">utah</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">,</span> <span class="s1">'hospitalized'</span><span class="p">]]</span>
<span class="n">utah</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1"># Omit the NaN cols</span>
<span class="n">utah</span> <span class="o">=</span> <span class="n">utah</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Scatter plots UT</span>
<span class="c1"># Split dependent var from independent variables</span>
<span class="n">target_ut</span> <span class="o">=</span> <span class="n">utah</span><span class="o">.</span><span class="n">hospitalizedCurrently</span>
<span class="n">indep_var_ut</span> <span class="o">=</span> <span class="n">utah</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'hospitalizedCurrently'</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">indep_var_tx</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">indep_var_ut</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">target_ut</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">indep_var_ut</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">'s'</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"plum"</span><span class="p">})</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Distributions of Independent Variables UT'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">###endutah</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Georgia:">
<a class="anchor" href="#Georgia:" aria-hidden="true"><span class="octicon octicon-link"></span></a>Georgia:<a class="anchor-link" href="#Georgia:"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">georgia</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'abbrev'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'GA'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'state'</span><span class="p">]</span><span class="o">==</span> <span class="s1">'Georgia'</span><span class="p">)]</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TODO fix legend/axis/plot alltogether</span>
<span class="c1"># Timeseries plt</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">georgia</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">georgia</span><span class="o">.</span><span class="n">hospitalizedCurrently</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Number of Patients in GA Currently Hospitalized'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'No. Patients'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Checking which cols have NaN values</span>
<span class="n">georgia</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">,</span> <span class="s1">'hospitalized'</span><span class="p">]]</span>
<span class="n">georgia</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1"># Omit the NaN cols</span>
<span class="n">georgia</span> <span class="o">=</span> <span class="n">georgia</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Scatter plots GA</span>
<span class="c1"># Split dependent var from independent variables</span>
<span class="n">target_ga</span> <span class="o">=</span> <span class="n">georgia</span><span class="o">.</span><span class="n">hospitalizedCurrently</span>
<span class="n">indep_var_ga</span> <span class="o">=</span> <span class="n">georgia</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'hospitalizedCurrently'</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">indep_var_ga</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">indep_var_ga</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">target_ga</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">indep_var_ga</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">'s'</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"plum"</span><span class="p">})</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Distributions of Independent Variables TX'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Boxplot of GA</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">georgia</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">georgia</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">georgia</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'lightpink'</span><span class="p">,</span> <span class="n">showfliers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Boxplots of Independent Variables GA'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">###endgeorgia</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Alabama:">
<a class="anchor" href="#Alabama:" aria-hidden="true"><span class="octicon octicon-link"></span></a>Alabama:<a class="anchor-link" href="#Alabama:"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bama</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'abbrev'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'AL'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'state'</span><span class="p">]</span><span class="o">==</span> <span class="s1">'Alabama'</span><span class="p">)]</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TODO fix legend/axis/plot alltogether</span>
<span class="c1"># Timeseries plt</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bama</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">bama</span><span class="o">.</span><span class="n">hospitalizedCurrently</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Number of Patients in AL Currently Hospitalized'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'No. Patients'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Checking which cols have NaN values</span>
<span class="n">bama</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">,</span> <span class="s1">'hospitalized'</span><span class="p">]]</span>
<span class="n">bama</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1"># Omit the NaN cols</span>
<span class="n">bama</span> <span class="o">=</span> <span class="n">bama</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Scatter plots AL</span>
<span class="c1"># Split dependent var from independent variables</span>
<span class="n">target_al</span> <span class="o">=</span> <span class="n">bama</span><span class="o">.</span><span class="n">hospitalizedCurrently</span>
<span class="n">indep_var_al</span> <span class="o">=</span> <span class="n">bama</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'hospitalizedCurrently'</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">indep_var_al</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">indep_var_al</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">target_al</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">indep_var_al</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">'s'</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"plum"</span><span class="p">})</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Distributions of Independent Variables AL'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Boxplot of AL</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bama</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">bama</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">bama</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'lightpink'</span><span class="p">,</span> <span class="n">showfliers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Boxplots of Independent Variables TX'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">###endalabama</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Oklahoma:">
<a class="anchor" href="#Oklahoma:" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oklahoma:<a class="anchor-link" href="#Oklahoma:"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">oklahoma</span> <span class="o">=</span> <span class="n">covid_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'abbrev'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'OK'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">covid_df</span><span class="p">[</span><span class="s1">'state'</span><span class="p">]</span><span class="o">==</span> <span class="s1">'Oklahoma'</span><span class="p">)]</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TODO fix legend/axis/plot alltogether</span>
<span class="c1"># Timeseries plt</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">oklahoma</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">oklahoma</span><span class="o">.</span><span class="n">hospitalizedCurrently</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Number of Patients in OK Currently Hospitalized'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'No. Patients'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Checking which cols have NaN values</span>
<span class="n">oklahoma</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">,</span> <span class="s1">'hospitalized'</span><span class="p">]]</span>
<span class="n">oklahoma</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1"># Omit the NaN cols</span>
<span class="n">oklahoma</span> <span class="o">=</span> <span class="n">oklahoma</span><span class="p">[[</span><span class="s1">'positive'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">,</span> <span class="s1">'hospitalizedCurrently'</span><span class="p">,</span> <span class="s1">'inIcuCurrently'</span><span class="p">,</span> <span class="s1">'recovered'</span><span class="p">,</span> <span class="s1">'death'</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Scatter plots OK</span>
<span class="c1"># Split dependent var from independent variables</span>
<span class="n">target_ok</span> <span class="o">=</span> <span class="n">oklahoma</span><span class="o">.</span><span class="n">hospitalizedCurrently</span>
<span class="n">indep_var_ok</span> <span class="o">=</span> <span class="n">oklahoma</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'hospitalizedCurrently'</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">indep_var_ok</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">indep_var_ok</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">target_ok</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">indep_var_ok</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">'s'</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"plum"</span><span class="p">})</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Distributions of Independent Variables OK'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Boxplot of OK</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">oklahoma</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> 
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">oklahoma</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">oklahoma</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'lightpink'</span><span class="p">,</span> <span class="n">showfliers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Boxplots of Independent Variables OK'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">###endoklahoma</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Assessing-Correlation-of-Independent-Variables">
<a class="anchor" href="#Assessing-Correlation-of-Independent-Variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Assessing Correlation of Independent Variables<a class="anchor-link" href="#Assessing-Correlation-of-Independent-Variables"> </a>
</h2>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TODO add some explanation / look more into collinear variables</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Heatmap of correlations</span>
<span class="c1"># Save correlations to variable</span>
<span class="n">corr</span> <span class="o">=</span> <span class="n">covid_cleaned</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">'pearson'</span><span class="p">)</span>
<span class="c1"># We can create a mask to not show duplicate values</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">triu</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">corr</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">bool</span><span class="p">))</span>
<span class="c1"># Set up the matplotlib figure</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span>

<span class="c1"># Generate heatmap</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corr</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">'GnBu'</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">square</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">linewidths</span><span class="o">=.</span><span class="mi">5</span><span class="p">,</span> <span class="n">cbar_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">"shrink"</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Build-model-for-dependent-Variable">
<a class="anchor" href="#Build-model-for-dependent-Variable" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build model for dependent Variable<a class="anchor-link" href="#Build-model-for-dependent-Variable"> </a>
</h2>
<ul>
<li>To be used to predict current hospitalizations</li>
<li>Having more complete variables for in ICU currently and on Ventilator Currently will allow us to predict these numbers as well.</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># We compare three models:</span>
<span class="c1"># - Polynomial Regression</span>
<span class="c1"># - Linear Regression</span>
<span class="c1"># - ElasticNet</span>

<span class="c1"># Copy DFs to not mess up original one</span>
<span class="c1"># We will use model_df for our regression model</span>
<span class="n">model_df</span> <span class="o">=</span> <span class="n">all_cases</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># Delete redundant rows</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'abbrev'</span><span class="p">,</span> <span class="s1">'bedsPerThousand'</span><span class="p">,</span> <span class="s1">'hospitalized'</span><span class="p">,</span> 
<span class="s1">'state'</span><span class="p">,</span> <span class="s1">'hospitalizedCumulative'</span><span class="p">,</span> <span class="s1">'dataQualityGrade'</span><span class="p">,</span> <span class="s1">'lastUpdateEt'</span><span class="p">]:</span>
    <span class="k">del</span> <span class="n">model_df</span><span class="p">[</span><span class="n">row</span><span class="p">]</span>

<span class="c1"># Drop NaN values for hospitalizedCurrently</span>
<span class="n">model_df</span> <span class="o">=</span> <span class="n">model_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">'hospitalizedCurrently'</span><span class="p">])</span>

<span class="c1"># Drop Values with abnormal active-hospitalised ratios (outside Conf. Interval)</span>
<span class="n">model_df</span><span class="p">[</span><span class="s1">'ratio_hospital'</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_df</span><span class="p">[</span><span class="s1">'hospitalizedCurrently'</span><span class="p">]</span> <span class="o">/</span> <span class="n">model_df</span><span class="p">[</span><span class="s1">'active'</span><span class="p">]</span>
<span class="n">model_df</span> <span class="o">=</span> <span class="n">model_df</span><span class="p">[</span><span class="o">~</span><span class="p">(</span><span class="n">model_df</span><span class="p">[</span><span class="s1">'ratio_hospital'</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">model_df</span><span class="o">.</span><span class="n">ratio_hospital</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.99</span><span class="p">))]</span>

<span class="c1">#model_df = model_df[~(model_df['ratio_hospital'] &lt;= model_df['ratio_hospital'].median())]</span>
<span class="k">del</span> <span class="n">model_df</span><span class="p">[</span><span class="s1">'ratio_hospital'</span><span class="p">]</span>

<span class="c1"># Get peek of model to use</span>
<span class="n">model_df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">### Mark Bee (https://www.facebook.com/markbeenyc) - do you need a sippy cup lesson on this information?   </span>
</pre></div>

    </div>
</div>
</div>

</div>
    

</div>



  </div><a class="u-url" href="/futureproof/futureproof-COVID19-usa-models/" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/futureproof/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/futureproof/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/futureproof/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p></p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/bielsnor" title="bielsnor"><svg class="svg-icon grey"><use xlink:href="/futureproof/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/gomezryan" title="gomezryan"><svg class="svg-icon grey"><use xlink:href="/futureproof/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
